<h3><i class="fas fa-book-reader"></i>ADO Cop Counter</h3>
<div class="section">
    <p class="lead">How Many Police Do I See On A Given Night</p>
</div>
<div class="divider">

</div>
<div>
    <form>
        <input type="text" class="username" id="userInput">
        <input type="password" class="password" id="passInput">
        <button class="btn waves-effect waves-light" type="submit" name="action">Submit
            <i class="material-icons right">Login</i>
    </form>
    <button class="btn waves-effect waves-light" id="signup">Sign-Up</button>
</div>
<a href="/auth/google" class="btn red darken-1">
    <i class="fab fa-google left"></i>Log In with Google
</a>

<script>
    const userInput = document.getElementById('userInput')
    const passInput = document.getElementById('passInput')
    const login = document.getElementById('submit')
    const signup = document.getElementById('signup')
    const formData = new FormData
    formData.append('username', username.value)
    formData.append('password', password.value)

    login.addEventListener('click', (e) => {
        e.preventDefault()
        fetch('/login', {
            method: 'POST',
            body: formData
        })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/'
                } else {
                    alert(data.message)
                }
            })
    })
    signup.addEventListener('click', (e) => {
        e.preventDefault()
        fetch('/signup', {
            method: 'POST',
            body: formData
        })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    window.location.href = '/'
                } else {
                    alert(data.message)
                }
            })
    })


</script>